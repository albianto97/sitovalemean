ğŸ”¹ STEP 1 â€” Fai prima il login e ottieni il token

Apri Postman.

Crea una nuova richiesta:

POST http://localhost:3000/api/auth/login


Nella tab Body â†’ raw â†’ JSON, metti:

{
  "email": "admin@example.com",
  "password": "password123"
}


Premi Send.

Se il login Ã¨ corretto, nel risultato vedrai qualcosa tipo:

{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": { "_id": "...", "username": "admin", "role": "admin" }
}


ğŸ‘‰ Copia tutto il valore di "token".

ğŸ”¹ STEP 2 â€” Inserisci il token in Postman

Ora vai sulla tua chiamata protetta (es. POST /api/products o GET /api/reservations).

Metodo 1 (piÃ¹ usato):

Nella tab Headers, aggiungi una nuova riga:

KEY	VALUE
Authorization	Bearer eyJhbGciOiJI...

âš ï¸ Importante: deve esserci la parola Bearer seguita da uno spazio e poi il token.

Esempio:

Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6...

Metodo 2 (comodo se fai molti test)

Puoi salvare il token in una variabile Postman:

Dopo il login, nella scheda â€œTestsâ€ della richiesta login incolla:

const jsonData = pm.response.json();
pm.environment.set("token", jsonData.token);


Poi nelle altre richieste usa:

Authorization: Bearer {{token}}


âœ… CosÃ¬ Postman userÃ  sempre automaticamente il token aggiornato.

ğŸ”¹ STEP 3 â€” Fai la POST di test

Esempio per creare un prodotto:

POST http://localhost:3000/api/products
Headers:
  Content-Type: application/json
  Authorization: Bearer {{token}}
Body (raw JSON):
{
  "name": "Lampada LED",
  "description": "Lampada da scrivania con luce calda",
  "stock": 5,
  "reserved": 0,
  "link": "https://example.com/lampada"
}


Premi Send â†’ dovresti ricevere 201 Created con lâ€™oggetto del prodotto appena salvato ğŸ‰
